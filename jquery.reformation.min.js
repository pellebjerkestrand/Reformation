/**
 *  jQuery Reformation v0.1
 *  Simple responsive image gallery plugin
 *  Named after Kiuas' Reformation - http://en.wikipedia.org/wiki/Reformation_(Kiuas_album)
 *
 *  Copyright 2013 Pelle Bjerkestrand - http://pellebjerkestrand.net/
 */(function(e){e.fn.reform=function(t){if(this.length===0)return this;if(this.length>1){this.each(function(){e(this).reform(t)});return this}var n=this,r={gallery:".gallery",slide:".slide",next:".next",prev:".prev",ratio:1,enableControls:!0,controls:".controls",auto:!1,onLoad:function(){},onBefore:function(){},onAfter:function(){},onNext:function(){},onPrev:function(){}},i={settings:{},elements:{viewport:null,gallery:null,slides:null,controls:null,contents:null},current:0,next:function(){i.settings.onNext(i.slides.eq(i.current),i.current);var e=i.current+1;i.show(e>=i.elements.slides.length?0:e)},prev:function(){i.settings.onPrev(i.slides.eq(i.current),i.current);var e=i.current-1;i.show(e<=-1?i.elements.slides.length-1:e)},show:function(e){i.settings.onBefore(i.slides.eq(i.current),i.current);var t=i.elements.slides.eq(e).css({opacity:1,"z-index":2});i.elements.slides.not(t).css({opacity:0,"z-index":1});i.current=e;i.settings.onAfter(i.slides.eq(i.current),i.current)},centerContent:function(){var e=i.elements.gallery.height(),t=i.elements.gallery.width(),n=t/e;if(n!==i.settings.ratio)if(n<i.settings.ratio){var r=e*i.settings.ratio;i.elements.contents.css({"margin-top":0,"margin-left":"-"+(r-t)/2+"px",height:e,width:r})}else{var s=t*i.settings.ratio;i.elements.contents.css({"margin-top":"-"+(s-e)/2+"px","margin-left":0,height:s,width:t})}},setInitialStyles:function(){i.elements.slides.css({display:"block",margin:0,overflow:"hidden",padding:0,position:"absolute",top:0,transition:"opacity .75s ease-in-out"});i.elements.viewport.css({height:"100%",position:"relative"});i.elements.gallery.css({bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0})},init:function(){if(!i.elements.slides){e.extend(i.settings,r,t);i.elements.viewport=n;i.elements.gallery=i.elements.viewport.find(i.settings.gallery);i.elements.slides=i.elements.viewport.find(i.settings.slide);i.elements.controls=i.elements.viewport.find(i.settings.controls);i.elements.contents=i.elements.slides.children();i.setInitialStyles();i.show(i.current);i.elements.controls.find(i.settings.next).off("click").on("click",function(e){i.next();e.preventDefault()});i.elements.controls.find(i.settings.prev).off("click").on("click",function(e){i.prev();e.preventDefault()});i.centerContent();e(window).resize(function(){i.centerContent()});i.settings.onLoad(i.slides.eq(i.current),i.current)}}};n.next=function(){i.next()};n.prev=function(){i.prev()};n.show=function(e){i.show(e)};i.init();return n}})(jQuery);